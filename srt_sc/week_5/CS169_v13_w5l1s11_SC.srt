1
00:00:00,000 --> 00:00:06,000
最令人兴奋的部分是我们让它们滚动。

2
00:00:06,006 --> 00:00:12,006
让我们让Cucumber和Capybara动起来。这就是所谓的…

3
00:00:12,012 --> 00:00:15,012
这是这个工具的另一个有趣的部分。令人难以置信的神奇。

4
00:00:15,015 --> 00:00:19,015
它是丰富的，非常丰富多彩的一个工具。

5
00:00:19,019 --> 00:00:22,019
它在你们使用步骤时给步骤添上颜色，所以绿色说明步骤通过，这是你的场景的状态。

6
00:00:22,022 --> 00:00:25,022
绿色代表步骤通过，黄色代表还没有实施，

7
00:00:25,025 --> 00:00:29,025
红色代表失败，如果失败，它将会停在原处

8
00:00:29,029 --> 00:00:32,029
所以之后的所有步骤将会是蓝色。

9
00:00:32,032 --> 00:00:35,032
我们的目标是进行红-黄-绿分析。

10
00:00:35,035 --> 00:00:38,035
你想让你的所有步骤都是绿色。

11
00:00:38,038 --> 00:00:43,038
让所有步骤都变成绿色，背后的故事就是

12
00:00:43,043 --> 00:00:47,043
创造这个工具的人的女朋友决定将它们都做成绿色，

13
00:00:47,047 --> 00:00:51,047
然后黄瓜是用来命名的很棒的蔬菜，

14
00:00:51,051 --> 00:00:53,051
因为你希望所有都是绿色的。我猜也许她是素食主义者一类的。

15
00:00:53,053 --> 00:01:01,053
现在我们将现场演示Cucumber，

16
00:01:01,061 --> 00:01:05,061
简称为cuc。这里有一个屏幕测试

17
00:01:05,065 --> 00:01:09,065
你们可以看看...但是我们来看看视频是否允许我做演示。

18
00:01:09,069 --> 00:01:15,069
我们要做的是“添加电影”。

19
00:01:15,075 --> 00:01:20,075
这是我们之前看到的那个，我会在这里的编辑器中展示给你们看。

20
00:01:20,080 --> 00:01:24,080
这就是我们要试着做的事情，并开始在这上面尝试运行Cucumber，

21
00:01:24,084 --> 00:01:29,084
我们将这个放入特性目录，

22
00:01:29,089 --> 00:01:33,089
这是添加电影.features。让我们去Cucumber，

23
00:01:33,093 --> 00:01:37,093
看Cucumber、特性、添加电影命令下

24
00:01:37,097 --> 00:01:41,097
会发生什么。大概，因为我们做的是红-黄-绿分析，

25
00:01:41,101 --> 00:01:46,101
这个最好不要都是绿色，结果也确实不是。

26
00:01:46,106 --> 00:01:50,106
它在靠下部分这里说我们做的一个场景失败了。

27
00:01:50,110 --> 00:01:53,110
一共有八个步骤，1个失败，7个跳过。

28
00:01:53,113 --> 00:02:01,113
现在我们向上滚动屏幕。在这里，它说，

29
00:02:01,121 --> 00:02:04,121
“假设我在Rotten Potatoes主页上”，这是红色，

30
00:02:04,124 --> 00:02:07,124
所以它失败了。这是另一条消息，

31
00:02:07,127 --> 00:02:10,127
“我找不到从Rotten Potatoes主页到路径的映射”。

32
00:02:10,130 --> 00:02:15,130
没错，这就是我们为了关联它，不只是它，而应该做的。

33
00:02:15,135 --> 00:02:18,135
这就像一个导航器。它不会只说，“你犯了一个错误。它在这里，”

34
00:02:18,138 --> 00:02:21,138
而是说，“现在这是修正方法，戴伍。

35
00:02:21,141 --> 00:02:27,141
戴伍，去往路径.rb添加一个映射来解决那个缺失的路径”，

36
00:02:27,147 --> 00:02:30,147
因此它不仅发现错误，还告诉你如何解决。

37
00:02:30,150 --> 00:02:37,150
所以我们就来这么做。这是Cucumber页面和路径.rb。

38
00:02:37,157 --> 00:02:40,157
它提供了完整的目录名称，但是到这就结束了。

39
00:02:40,160 --> 00:02:45,160
让我回去看看，我差点忘了。这是它希望找到的，

40
00:02:45,165 --> 00:02:50,165
所以我来复制一下。这就是我要在

41
00:02:50,170 --> 00:02:55,170
“when”条件语句中写的内容。现在我要复制下来，

42
00:02:55,175 --> 00:02:59,175
然后去path.rb，就在这里。这里写着，

43
00:02:59,179 --> 00:03:03,179
在这里为文件添加更多映射。你能看到这里有一个例子

44
00:03:03,183 --> 00:03:06,183
例子，这是一个“when”条件语句，

45
00:03:06,186 --> 00:03:09,186
这是戴着帽子的正则表达式，意味着句子的开始。

46
00:03:09,189 --> 00:03:15,189
我们要复制这个语句，放入path.rb，所以我做好了。

47
00:03:15,195 --> 00:03:19,195
现在我要添加这个路径，就像阿曼德之前展示的那样。

48
00:03:19,199 --> 00:03:31,199
我要运行rake routes，好了，

49
00:03:31,211 --> 00:03:35,211
这个将列出页面上的内容，所以这是索引动作。

50
00:03:35,215 --> 00:03:38,215
这是“get”命令，这是我想要的路径，

51
00:03:38,218 --> 00:03:44,218
也就是/movies。再复制，

52
00:03:44,224 --> 00:03:51,224
然后去path.rb，把它加在这个后面，加上引号，

53
00:03:51,231 --> 00:03:56,231
就是在这里，好了。Cuc发现了消息，然后告诉我去解决它，

54
00:03:56,236 --> 00:04:03,236
我使用rake路径来完成，让我去最后面。

55
00:04:03,243 --> 00:04:06,243
我来清理一下屏幕，以免让你们混淆了。

56
00:04:06,246 --> 00:04:13,246
我们再试一次，并发现一个错误。

57
00:04:13,253 --> 00:04:19,253
我们来尝试做做红-黄-绿分析，

58
00:04:19,259 --> 00:04:24,259
看看是否有希望取得一些进展，它写着，再“看”底部。

59
00:04:24,264 --> 00:04:27,264
场景失败了。我们有八个步骤，这次通过了2个，1个失败，

60
00:04:27,267 --> 00:04:31,267
其余的跳过。这里有一个相当大的错误消息。

61
00:04:31,271 --> 00:04:37,271
它应该与这个非常相似。

62
00:04:37,277 --> 00:04:40,277
当我在Rotten Potatoes主页，添加一个新电影，

63
00:04:40,280 --> 00:04:44,280
然后我应该进入创建新页面，电影页面。它写着，

64
00:04:44,284 --> 00:04:47,284
“我无法找到从创建新电影页面到路径的映射，”

65
00:04:47,287 --> 00:04:49,287
而这多少让我联想起导航仪，当你坐进车里，

66
00:04:49,289 --> 00:04:53,289
打开汽车导航，过一会你不再跟着它。

67
00:04:53,293 --> 00:04:55,293
它看起来不像是开始对你发火吗？“拜托，向右转。”

68
00:04:55,295 --> 00:05:00,295
“大卫，该死，去给目标Rotten Potatoes主页添加一个映射。”

69
00:05:00,000 --> 00:05:05,300
告诉我该怎么做。

70
00:05:05,305 --> 00:05:09,305
我要复制。现在我们去路径。还是一样，

71
00:05:09,309 --> 00:05:25,309
我要在添加新电影页面，在句子开头写上“when”。

72
00:05:25,325 --> 00:05:31,325
我正在创建电影页面，

73
00:05:31,331 --> 00:05:34,331
现在让我回到rake路径，这一次，我要在这里做新动作。

74
00:05:34,334 --> 00:05:42,334
这是我需要的路径，movies/new，所以复制。

75
00:05:42,342 --> 00:05:47,342
去path.rb，添加进去。我们已经做好的就是围绕

76
00:05:47,347 --> 00:05:53,347
现行有效的内容增加了一个用户故事。

77
00:05:53,353 --> 00:06:01,353
我们额外做一个测试，看它是否奏效。

78
00:06:01,361 --> 00:06:08,361
我们来看看Cucumber说什么。再次清除屏幕，运行，

79
00:06:08,368 --> 00:06:27,368
看它现在是否乐观。绿色，1个场景，通过，所有8个步骤

80
00:06:27,387 --> 00:06:32,387
全部通过，你看cucumber的绿色分析功能多么强大。

81
00:06:32,392 --> 00:06:39,392
好吧，这是已有的特性，我们并没有添加任何新特性。

82
00:06:39,399 --> 00:06:43,399
我们没有向应用程序添加新功能。

83
00:06:43,403 --> 00:06:46,403
我们只是添加了一个测试，以确保它可行并且让我们能看到，

84
00:06:46,406 --> 00:06:48,406
然后我们添加了《黑衣人》，它真的出现了。
